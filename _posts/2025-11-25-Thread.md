---
layout: post
author: joonwan jeon
tags: [operating system]
category: operating system
---

# Thread 란?

Thread 란 process 내부에 cpu 작업을 수행하는 최소 단위를 의미합니다. 

![](/assets/images/os/thread_in_process.png)
process 의 주소공간은 크게 code, data, stack 영역으로 구성되어 있습니다. 이 중 stack 영역을 thread 별로 독립적으로 가지게 되고 나머지 부분은 여러 thread 가 공유하게 됩니다.

![](/assets/images/os/thread_unique_pcb.png)

또한 pcb 에서 보라색으로 칠해진 부분, 즉 cpu 의 수행 관련 정보가 thread 별로 각각 관리됩니다. 

# Thread 별로 독자적으로 관리되는 부분

thread 는 다음으로 구성되어 있습니다.

- program counter
- register set
- stack sapce

즉 cpu 수행정보를 나타내는 것들로 구성되어 있습니다.

# 여러 Thread 가 공유하는 부분

한 프로세스 내부의 여러 thread 들은 process 의 다음 구성요소를 공유합니다.

- code section
- data section
- os resources 

# 여러 Thread 를 사용함으로써 얻을 수 있는 장점 

## Responsiveness - 응답성
- 해당 프로세스를 사용하는 사용자 입장에서는 빠르게 느껴집니다.
- 한 thread 가 처리하는 작업이 늦어지더라도 다른 thread 가 다른 작업을 더 빠르게 완료해 먼저 끝난 작업을 먼저 사용자에게 보여줄 수 있기 때문입니다.

## Resource Sharing
- n 개의 thread 는 code, data, resource 를 공유합니다. 
- 같은 작업을 하는 여러 process 를 만드는 대신, 자원을 공유하는 여러 thread 를 만들 경우 자원을 아낄 수 있습니다.
- 자원을 공유하므로써 메모리를 좀더 효율적으로 사용할 수 있습니다.

## Economy

- 동일한 일을 하는 process 를 하나 더 만드는 것 보다는 process 내부에 thread 를 만드는 것이 훨씬 더 비용이 저렴합니다.
- process 간 context switching 보다 thread 간 context switching 비용이 더 적게 듭니다.
- solaris os 의 경우 두 오버해드가 각각 30배, 5배 정도 차이가 납니다.

## Utilization of MP Architecture
- MP 란 Muliprocessor 를 의미합니다.
- 즉 cpu 가 여러개 있는 구조에서 각 thread 가 서로 다른 cpu 에서 병렬적으로 실행 가능합니다.
- 굉장히 큰 행렬 계산 작업 등에서 결과를 더 빠르게 얻을 수 있습니다.