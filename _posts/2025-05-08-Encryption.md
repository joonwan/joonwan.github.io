---
layout: post
author: joonwan
tags: [암호학]
title: 암호학- 암호
---

# 암호란?

암호란 일반적인 평문을 해독할 수 없는 형태로 바꾸는 과정 또는 그 결과물을 의미합니다.

암호는 다음과 같은 특징을 가지고 있습니다.

**1. 기밀성**

기밀성이란 권한이 없는 사람이 암호화 된 내용이 무엇인지 확인할 수 없는 특성을 의미합니다.

**2. 무결성**

무결성이란 내용이 원본과 같다는 것을 보장한다는 특성을 의미합니다. 

**3. 인증**

인증이란 권한이 있는 사람만 정보에 접근할 수 있는 것을 의미합니다.


# 암호화와 복호화

![](/assets/images/cryptography/encryption.png)

먼저 누구나 알아볼 수 있는 글을 `평문 (plain text)` 이라고 합니다. 암호 알고리즘을 통해 알아볼 수 없는 문자열로 변한 글을 `암호문 (cipher text)` 이라고 합니다.

평문을 암호문으로 바꾸는 것을 `암호화 (encryption)` 라고 합니다. 이와 반대 과정, 즉 암호문을 평문으로 변경하는 것을 바로 `복호화 (decryption)` 라고 합니다.

![](/assets/images/cryptography/encryption_with_key.png)

과거 암호화 알고리즘을 공개하지 않는 방식을 통해 암호화 라는 목적을 달성했습니다. 하지만 현대에는 암호화 알고리즘을 공개합니다. 공개된 알고리즘은 검증을 받게 됩니다. 대신 암호화 및 복호화 시 `비밀 정보 (key)` 를 사용해 암호화 라는 목적을 달성합니다.

# 암호 방법 

암호 방법은 크게 2가지로 나누어 집니다.

**1. 단방향 암호화**

![](/assets/images/cryptography/one-way-encryption.png)

단방향 암호화는 오로지 `암호화`만 가능합니다. 복호화는 되지 않습니다. 단방향 암호화는 Hash 라고도 불립니다. 영어로 Hash 는 다지다 라는 의미인데 음식이 다져지면 복원할 수 없듯이 평문또한 다져지면 다시 복호화 할 수 없습니다.  단방향 암호화의 종류는 다음과 같습니다.

- md5
- sha

hash 를 사용하는 이유는 데이터의 무결성 때문입니다. 어떤 정보가 원본으로 부터 훼손되었거나 조작되지 않았는지 판단할 때 무결성을 이용해서 판단할 수 있습니다.


[debian iso download](https://www.debian.org/download)

![](/assets/images/cryptography/debian-download.png)

debian 같은 파일을 다운 받을 때, hash 된 문자열 까지 함께 제공됩니다. 해당 파일을 사용할 사람들은 해당 파일을 다운 받은 다음 해시를 적용해 원본 파일과 동일한 파일인지 아니면 변조된 파일인지 확인할 수 있습니다.

```shell
sha512sum debian-12.10.0-amd64-netinst.iso
```

다운 받을 파일을 `sha512sum` 명령을 통해 해당 파일의 해시 값을 도출할 수 있습니다.

**결과**

```text
cb089def0684fd93c9c2fbe45fd16ecc809c949a6fd0c91ee199faefe7d4b82b64658a264a13109d59f1a40ac3080be2f7bd3d8bf3e9cdf509add6d72576a79b  debian-12.10.0-amd64-netinst.iso
```
이제 사이트에 나와있는 hash 값과 동일한지 비교해 볼 수 있습니다.

**site 에 기재된 hash 값**

```text
cb089def0684fd93c9c2fbe45fd16ecc809c949a6fd0c91ee199faefe7d4b82b64658a264a13109d59f1a40ac3080be2f7bd3d8bf3e9cdf509add6d72576a79b  debian-12.10.0-amd64-netinst.iso
```

따라서 해당 파일은 변조되지 않은 것을 확인할 수 있습니다.

**2. 양방향 암호화**

양방향 암호화는 암호화와 복호화 둘다 가능한 암호화 기법입니다. 이는 다시 두가지 방법으로 나뉘어 집니다.

#### 대칭 키 방식

![](/assets/images/cryptography/대칭키암호화.png)

대칭키 방식은 암호화와 복호화에 동일한 키 값을 사용하는 방식입니다. 

![](/assets/images/cryptography/대칭키암호화문제점.png)

암호화와 복호화할 때 같은 키를 사용할 경우 큰 문제점이 있습니다.

만약 키값과 암호문이 해커에게 넘어갈 경우 키와 암호문을 조합해 평문으로 복호화할 수 있기 때문입니다.

#### 비대칭 키 방식

![](/assets/images/cryptography/비대칭키1.png)

비대칭 키 방식은 암호화 및 복호화할 때 각각 다른 key 를 사용합니다.

예를 들어 `userB` 가 `userA` 에게 암호문을 보내는 상황이라고 가정하겠습니다. 
`userB` 는 인터넷에 공개된 `userA` 의 `public key` 를 이용해 평문을 암호화 시킵니다. 이후 `userB` 는 `userA` 에게 암호문을 보냅니다.

이때 `hacker` 또한 이 암호문을 탈취 할 수 있습니다. 하지만 대칭키 암호화 방식과의 차이는 **암호문을 private key 로 복호화할 수 있다는 점** 입니다. 따라서 `private key` 를 가진 `userA` 는 암호문을 복호화 시켜 평문으로 바꾸어 해석할 수 있지만 `hacker` 는 `userA` 의 `private key` 가 없기 때문에 해당 암호문을 복호화 할 수 없습니다.


# 정리

- 암호화 하는 방식은 크게 양방향 암호화, 단방향 암호화 방식으로 나눌 수 있다.
- 단방향 암호화 방식은 암호화는 가능하지만 복호화는 시키지 못한다.
- 양방향 암호화는 암호화와 복호화 둘다 가능하다.
- 양방향 암호화는 대칭키 방식, 비대칭 키 방식으로 나눌 수 있다.
- 대칭키 방식은 암호화와 복호화 시 동일한 키를 사용한다. 따라서 key 를 털리면 해커가 암호문을 복호화 할 수 있다.
- 비대칭키 방식은 암호화와 복호화 시 다른 키를 사용한다. 
- 비대칭키 방식은 공개키를 통해 암호화 하고 개인 키를 통해 복호화 한다. 따라서 개인 키가 유출되지 않게 조심해야 한다.